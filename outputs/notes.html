<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Easy-Read Notes</title>
  <link href='https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
@font-face {
  font-family: 'Lexend';
  src:
    url('fonts/Lexend-VariableFont_wght.woff2') format('woff2'),
    url('fonts/Lexend-VariableFont_wght.ttf') format('truetype');
  font-weight: 100 900; font-style: normal; font-display: swap;
}
/* If you also fetched OpenDyslexic (.otf or .ttf) */
@font-face {
  font-family: 'OpenDyslexic';
  src:
    url('fonts/OpenDyslexic-Regular.woff2') format('woff2'),
    url('fonts/OpenDyslexic-Regular.woff') format('woff'),
    url('fonts/OpenDyslexic-Regular.otf') format('opentype'),
    url('fonts/OpenDyslexic-Regular.ttf') format('truetype');
  font-weight: 400; font-style: normal; font-display: swap;
}

:root {
  --font-lexend: 'Lexend', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  --font-od: 'OpenDyslexic', 'Lexend', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  --font-body: var(--font-lexend);
  --scale: 1;              /* A+/A− text scale */
  --max-line: 70ch;
  --text: #111; --bg: #fff; --muted: #555; --accent: #005fcc; --border: #e5e7eb;
}
@media (prefers-color-scheme: dark) {
  :root { --text:#e8eaed; --bg:#121212; --muted:#a1a1aa; --border:#2a2a2a; --accent:#8ab4f8; }
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  font-family: var(--font-body);
  font-size: calc(18px * var(--scale));
  color: var(--text); background: var(--bg);
  line-height: 1.65; margin: 0; padding: 2rem;
}
main { max-width: var(--max-line); margin: 0 auto; }
header { display:flex; gap:.5rem; align-items:center; justify-content:space-between; margin:0 0 1rem; }
.controls { display:flex; gap:.5rem; flex-wrap:wrap; }
button {
  font: inherit; padding:.45rem .7rem; border-radius:10px; border:1px solid var(--border);
  background: transparent; color: var(--text); cursor:pointer;
}
button:hover { background: rgba(127,127,127,.08); }
small { color: var(--muted); }
h1, h2 { line-height: 1.3; }
h1 { font-size: 1.8rem; margin: 0 0 .25rem; }
h2 { font-size: 1.2rem; margin: 2rem 0 0.5rem; }
ul { padding-left: 1.2rem; } li { margin: 0.3rem 0; }
.tldr { border: 2px solid var(--border); background: rgba(127,127,127,.06); padding: .75rem 1rem; margin: .75rem 0 .25rem; border-radius: 10px; }
.tldr b { color: var(--accent); }
.section { border-top: 1px solid var(--border); padding-top: 1rem; margin-top: 1rem; }
.meta, .footer-note { color: var(--muted); font-size: .9rem; }
.glossary dt { font-weight: 600; }
.glossary dd { margin: 0 0 .75rem 0; }
a { color: var(--accent); text-decoration: underline; }
@page { size: A4; margin: 1in; }

:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
  border-radius: 8px;
}

/* runtime toggles */
.od { --font-body: var(--font-od); }
.dark { --text:#e8eaed; --bg:#121212; --muted:#a1a1aa; --border:#2a2a2a; --accent:#8ab4f8; }

/* WCAG skip link */
.skip-link {
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus {
  position:static; width:auto; height:auto; padding:.4rem .6rem; border:1px solid var(--border);
  border-radius:10px; background:#fff; color:#000; display:inline-block; margin-bottom:.5rem;
}

:root { --accent: #0b63ff; }               /* light */
.dark { --accent: #93c1ff; }               /* dark */
</style>
</head>
<body>
  <main id="main" role="main" tabindex="-1">
    
<header>
  <div>
    <a class="skip-link" href="#main">Skip to content</a>
    <h1>Easy-Read Notes</h1>
    <small class="meta">Source: outputs/sections.json</small>
  </div>
  <div class="controls" role="toolbar" aria-label="Display options">
  <button id="btn-font" type="button" onclick="toggleFont(this)" aria-pressed="false" title="Toggle Lexend / Dyslexic font">Font</button>
  <button id="btn-dark" type="button" onclick="toggleTheme(this)" aria-pressed="false" title="Toggle light / dark">Dark</button>
  <button type="button" onclick="fontSmaller()" aria-label="Decrease text size">A−</button>
  <button type="button" onclick="fontBigger()"  aria-label="Increase text size">A+</button>
  <button type="button" onclick="fontReset()"   aria-label="Reset text size">Reset</button>
</div>
</header>

    
    <section class="section" aria-labelledby="sec_01">
      <h2 id="sec_01">In the public space, we stand tall</h2>
      <div class="tldr"><b>TL;DR:</b> In the public space, we stand tall.</div>
      <p><audio controls preload='none' src='outputs/audio/sec_01.mp3' aria-label='Audio for sec_01'></audio></p>
      <h3>Key points</h3>
      <ul><li>Love is the answer, a light for lazy to pay.</li></ul>
      
        <h3>Glossary</h3>
        <dl class='glossary'>
          <dt>Love</dt><dd></dd>
        </dl>
        
    </section>
    
    <p class="footer-note">Generated by Whisper-to-Cards.</p>
  </main>
  
<script>
(function(){
  const root = document.documentElement;
  const LS = window.localStorage || null;
  const saved = LS ? JSON.parse(LS.getItem('w2c_prefs') || '{}') : {};
  if (saved.font === 'od') root.classList.add('od');
  if (saved.theme === 'dark') root.classList.add('dark');
  if (saved.scale) root.style.setProperty('--scale', saved.scale);

  function save(){
    if(!LS) return;
    const prefs = {
      font: root.classList.contains('od') ? 'od' : 'lexend',
      theme: root.classList.contains('dark') ? 'dark' : 'light',
      scale: getComputedStyle(root).getPropertyValue('--scale').trim() || '1'
    };
    LS.setItem('w2c_prefs', JSON.stringify(prefs));
  }

  function setPressed(btn, on){ if(btn) btn.setAttribute('aria-pressed', on ? 'true' : 'false'); }

  window.toggleFont = function(btn){
    root.classList.toggle('od');
    setPressed(btn, root.classList.contains('od'));
    save();
  }

  window.toggleTheme = function(btn){
    root.classList.toggle('dark');
    setPressed(btn, root.classList.contains('dark'));
    save();
  }

  function setScale(x){ root.style.setProperty('--scale', x.toFixed(2)); save(); }
  window.fontBigger = function(){ const cur=parseFloat(getComputedStyle(root).getPropertyValue('--scale'))||1; setScale(Math.min(cur+0.1, 1.8)); }
  window.fontSmaller = function(){ const cur=parseFloat(getComputedStyle(root).getPropertyValue('--scale'))||1; setScale(Math.max(cur-0.1, 0.8)); }
  window.fontReset  = function(){ setScale(1.0); }

  // Initialize aria-pressed on load
  window.addEventListener('DOMContentLoaded', () => {
    setPressed(document.getElementById('btn-font'),  root.classList.contains('od'));
    setPressed(document.getElementById('btn-dark'),  root.classList.contains('dark'));
  });
})();
</script>

</body>
</html>
